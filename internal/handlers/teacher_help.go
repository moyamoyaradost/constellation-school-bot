package handlers

import (
	"database/sql"

	tgbotapi "github.com/go-telegram-bot-api/telegram-bot-api/v5"
)

// –°–ø—Ä–∞–≤–∫–∞ –¥–ª—è –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–µ–π (–æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∞—è –∫–æ–º–∞–Ω–¥–∞ Teacher)
func handleHelpTeacherCommand(bot *tgbotapi.BotAPI, message *tgbotapi.Message, db *sql.DB) {
	userID := message.From.ID

	// –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ä–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
	var role string
	err := db.QueryRow("SELECT role FROM users WHERE tg_id = $1", userID).Scan(&role)

	if err != nil || (role != "teacher" && role != "superuser") {
		sendMessage(bot, message.Chat.ID, "‚ùå –£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Å–ø—Ä–∞–≤–∫–∏ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è")
		return
	}

	helpText := "üë®‚Äçüè´ **–°–ø—Ä–∞–≤–∫–∞ –¥–ª—è –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–µ–π**\n\n" +
		"**üìã –î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:**\n\n" +
		"**üìÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É—Ä–æ–∫–∞–º–∏:**\n" +
		"‚Ä¢ `/create_lesson <subject_code> <date> <time> [max_students]` - —Å–æ–∑–¥–∞—Ç—å —É—Ä–æ–∫\n" +
		"‚Ä¢ `/reschedule_lesson <lesson_id> <new_date> <new_time>` - –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ —É—Ä–æ–∫\n" +
		"‚Ä¢ `/cancel_lesson <lesson_id>` - –æ—Ç–º–µ–Ω–∏—Ç—å —É—Ä–æ–∫\n\n" +
		"**üë• –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ç—É–¥–µ–Ω—Ç–∞–º–∏:**\n" +
		"‚Ä¢ `/my_students` - —Å–ø–∏—Å–æ–∫ –º–æ–∏—Ö —Å—Ç—É–¥–µ–Ω—Ç–æ–≤\n" +
		"‚Ä¢ `/my_lessons` - –º–æ–∏ —É—Ä–æ–∫–∏\n\n" +
		"**üìö –î–æ—Å—Ç—É–ø–Ω—ã–µ –ø—Ä–µ–¥–º–µ—Ç—ã:**\n" +
		"‚Ä¢ `3D_MODELING` - 3D-–º–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏–µ\n" +
		"‚Ä¢ `GAMEDEV` - –ì–µ–π–º–¥–µ–≤\n" +
		"‚Ä¢ `VFX_DESIGN` - VFX-–¥–∏–∑–∞–π–Ω\n" +
		"‚Ä¢ `GRAPHIC_DESIGN` - –ì—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–π –¥–∏–∑–∞–π–Ω\n" +
		"‚Ä¢ `WEB_DEV` - –í–µ–±-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞\n" +
		"‚Ä¢ `COMPUTER_LITERACY` - –ö–æ–º–ø—å—é—Ç–µ—Ä–Ω–∞—è –≥—Ä–∞–º–æ—Ç–Ω–æ—Å—Ç—å\n\n" +
		"**üìù –ü—Ä–∏–º–µ—Ä—ã –∫–æ–º–∞–Ω–¥:**\n" +
		"‚Ä¢ `/create_lesson WEB_DEV 2025-08-15 18:00 10`\n" +
		"‚Ä¢ `/reschedule_lesson 15 2025-08-16 19:00`\n" +
		"‚Ä¢ `/cancel_lesson 22`\n\n" +
		"**‚ÑπÔ∏è –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:**\n" +
		"‚Ä¢ –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 10\n" +
		"‚Ä¢ –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —É—Ä–æ–∫–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 90 –º–∏–Ω—É—Ç\n" +
		"‚Ä¢ –§–æ—Ä–º–∞—Ç –¥–∞—Ç—ã: YYYY-MM-DD\n" +
		"‚Ä¢ –§–æ—Ä–º–∞—Ç –≤—Ä–µ–º–µ–Ω–∏: HH:MM (24-—á–∞—Å–æ–≤–æ–π)\n\n" +
		"**üÜò –ü–æ–¥–¥–µ—Ä–∂–∫–∞:**\n" +
		"–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º –æ–±—Ä–∞—â–∞–π—Ç–µ—Å—å –∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É."

	msg := tgbotapi.NewMessage(message.Chat.ID, helpText)
	msg.ParseMode = "Markdown"
	bot.Send(msg)
}
