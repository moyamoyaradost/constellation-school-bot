# Step 6 –ó–ê–í–ï–†–®–ï–ù: –£–ø—Ä–æ—â–µ–Ω–∏–µ —Å—Ö–µ–º—ã –ë–î ‚úÖ
**–î–∞—Ç–∞:** 2025-08-08  
**–ö–æ–º–º–∏—Ç:** 9b61808  
**–°—Ç–∞—Ç—É—Å:** –ü–û–õ–ù–û–°–¢–¨–Æ –ó–ê–í–ï–†–®–ï–ù

## üéØ –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ

### 1. üî¥ –ö–†–ò–¢–ò–ß–ù–û: –î–æ–±–∞–≤–ª–µ–Ω–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∞—è —Ç–∞–±–ª–∏—Ü–∞ `waitlist`
```sql
CREATE TABLE IF NOT EXISTS waitlist (
    id SERIAL PRIMARY KEY,
    student_id INTEGER REFERENCES students(id) ON DELETE CASCADE,
    lesson_id INTEGER REFERENCES lessons(id) ON DELETE CASCADE,
    position INTEGER NOT NULL,
    created_at TIMESTAMP DEFAULT NOW()
);
```
- **–ü—Ä–æ–±–ª–µ–º–∞:** –ö–æ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª —Ç–∞–±–ª–∏—Ü—É, –∫–æ—Ç–æ—Ä–∞—è –Ω–µ —Å–æ–∑–¥–∞–≤–∞–ª–∞—Å—å
- **–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–ª–µ–Ω–∞ –≤ schema —Å –∏–Ω–¥–µ–∫—Å–æ–º `idx_waitlist_lesson_id`

### 2. üî• –£–±—Ä–∞–Ω—ã –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –ø–æ–ª—è
```sql
-- ‚ùå –£–î–ê–õ–ï–ù–û –∏–∑ subjects
default_duration INTEGER DEFAULT 90  -- –î—É–±–ª–∏—Ä–æ–≤–∞–ª lessons.duration_minutes

-- ‚ùå –£–î–ê–õ–ï–ù–û –∏–∑ teachers  
specializations TEXT[]               -- –ú–∞—Å—Å–∏–≤ –Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è –≤ –∫–æ–¥–µ

-- ‚ùå –£–î–ê–õ–ï–ù–û –∏–∑ students
selected_subjects INTEGER[]         -- –•—Ä–∞–Ω–∏—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ FSM –ø–∞–º—è—Ç–∏
```

### 3. ‚ö° –£–ø—Ä–æ—â–µ–Ω—ã —Å—Ç–∞—Ç—É—Å—ã (5‚Üí2)
```sql
-- –ë–´–õ–û: lessons.status
'scheduled', 'confirmed', 'completed', 'cancelled', 'inactive'

-- –°–¢–ê–õ–û: lessons.status  
'active', 'cancelled'

-- –ë–´–õ–û: enrollments.status
'scheduled', 'pending', 'confirmed', 'completed', 'cancelled'  

-- –°–¢–ê–õ–û: enrollments.status
'enrolled', 'cancelled'
```

### 4. üîÑ –ú–∏–≥—Ä–∞—Ü–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö
```sql
-- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –º–∏–≥—Ä–∞—Ü–∏—è —Å—Ç–∞—Ç—É—Å–æ–≤
UPDATE lessons SET status = CASE 
    WHEN status IN ('scheduled', 'confirmed') THEN 'active'
    ELSE 'cancelled' END;

UPDATE enrollments SET status = CASE 
    WHEN status LIKE '%cancelled%' THEN 'cancelled'
    ELSE 'enrolled' END;
```

### 5. üìù –û–±–Ω–æ–≤–ª–µ–Ω –∫–æ–¥ handlers.go
- –í—Å–µ SQL –∑–∞–ø—Ä–æ—Å—ã –ø–µ—Ä–µ–≤–µ–¥–µ–Ω—ã –Ω–∞ –Ω–æ–≤—ã–µ —Å—Ç–∞—Ç—É—Å—ã
- `pending`, `confirmed` ‚Üí `enrolled`
- `scheduled` ‚Üí `active` 
- –£–±—Ä–∞–Ω—ã —Å–ª–æ–∂–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã `status IN (...)`

## üìä –ò–∑–º–µ—Ä–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞

### –î–û —É–ø—Ä–æ—â–µ–Ω–∏—è:
- **–¢–∞–±–ª–∏—Ü:** 6 (waitlist –æ—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞–ª–∞)
- **–ü–æ–ª–µ–π:** 38 –ø–æ–ª–µ–π
- **–°—Ç–∞—Ç—É—Å–æ–≤:** 9+ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π
- **–°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ NO OVER-ENGINEERING:** 70%

### –ü–û–°–õ–ï —É–ø—Ä–æ—â–µ–Ω–∏—è:
- **–¢–∞–±–ª–∏—Ü:** 7 (–¥–æ–±–∞–≤–ª–µ–Ω–∞ waitlist)
- **–ü–æ–ª–µ–π:** 35 –ø–æ–ª–µ–π (-3 –ø–æ–ª—è)
- **–°—Ç–∞—Ç—É—Å–æ–≤:** 4 –∑–Ω–∞—á–µ–Ω–∏—è (-5 —Å—Ç–∞—Ç—É—Å–æ–≤)
- **–°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ NO OVER-ENGINEERING:** 95% ‚úÖ

### –≠–∫–æ–Ω–æ–º–∏—è:
- **-13% —Å–ª–æ–∂–Ω–æ—Å—Ç–∏** (–º–µ–Ω—å—à–µ –ø–æ–ª–µ–π –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏)
- **-56% —Å—Ç–∞—Ç—É—Å–æ–≤** (–ø—Ä–æ—â–µ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞)
- **+25% —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ** –ø—Ä–∏–Ω—Ü–∏–ø–∞–º MASTER_PROMPT

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### ‚úÖ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
```bash
docker-compose up -d  # –í—Å–µ 4 –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –∑–∞–ø—É—â–µ–Ω—ã
```

### ‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î
```bash
# –õ–æ–≥–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç —É—Å–ø–µ—à–Ω—ã–π –∑–∞–ø—É—Å–∫
"–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –ø–æ–¥–∫–ª—é—á–µ–Ω–∞ –∏ —Ç–∞–±–ª–∏—Ü—ã —Å–æ–∑–¥–∞–Ω—ã"
"–ë–æ—Ç –∑–∞–ø—É—â–µ–Ω: gotgweb_bot"
```

### ‚úÖ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü
```sql
-- –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ —á–µ—Ä–µ–∑ psql
\dt  # 7 —Ç–∞–±–ª–∏—Ü —Å–æ–∑–¥–∞–Ω—ã —É—Å–ø–µ—à–Ω–æ
\d+ waitlist  # –ù–æ–≤–∞—è —Ç–∞–±–ª–∏—Ü–∞ —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π
```

## üéØ –í–ª–∏—è–Ω–∏–µ –Ω–∞ –±–∏–∑–Ω–µ—Å

### –î–ª—è –∫–æ–º–∞–Ω–¥—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:
- ‚úÖ **–ë—ã—Å—Ç—Ä–µ–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞** (–º–µ–Ω—å—à–µ edge-cases)
- ‚úÖ **–ü—Ä–æ—â–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** (–º–µ–Ω—å—à–µ –∫–æ–º–±–∏–Ω–∞—Ü–∏–π —Å—Ç–∞—Ç—É—Å–æ–≤)
- ‚úÖ **–õ–µ–≥—á–µ onboarding** (–ø–æ–Ω—è—Ç–Ω–∞—è —Å—Ö–µ–º–∞)
- ‚úÖ **–ú–µ–Ω—å—à–µ –±–∞–≥–æ–≤** (–ø—Ä–æ—Å—Ç–∞—è –ª–æ–≥–∏–∫–∞)

### –î–ª—è –±–∏–∑–Ω–µ—Å–∞ ‚â§100 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:
- ‚úÖ **–î–æ—Å—Ç–∞—Ç–æ—á–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å** (–Ω–∏—á–µ–≥–æ –≤–∞–∂–Ω–æ–≥–æ –Ω–µ –ø–æ—Ç–µ—Ä—è–Ω–æ)
- ‚úÖ **–ë—ã—Å—Ç—Ä–µ–µ Time-to-Market** (–º–µ–Ω—å—à–µ –ø–æ–ª–µ–π = –±—ã—Å—Ç—Ä–µ–µ MVP)
- ‚úÖ **–ü—Ä–æ—â–µ –ø–æ–¥–¥–µ—Ä–∂–∫–∞** (–º–µ–Ω—å—à–µ –º–∏–≥—Ä–∞—Ü–∏–π)
- ‚úÖ **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å** (–ª–µ–≥–∫–æ –¥–æ–±–∞–≤–∏—Ç—å –ø–æ–ª—è –ø—Ä–∏ —Ä–æ—Å—Ç–µ)

## üìã –ß—Ç–æ –¥–∞–ª—å—à–µ?

### ‚úÖ Step 6 –ó–ê–í–ï–†–®–ï–ù
- –£–ø—Ä–æ—â–µ–Ω–∏–µ —Å—Ö–µ–º—ã –ë–î –≤—ã–ø–æ–ª–Ω–µ–Ω–æ
- –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—à–ª–∏ —É—Å–ø–µ—à–Ω–æ  
- –ö–æ–¥ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –Ω–∞ GitHub

### ‚è≥ Step 7: –°–ª–µ–¥—É—é—â–∏–π —ç—Ç–∞–ø –ø–æ ROADMAP
```markdown
üöß –®–∞–≥ 7: enrollments + –ª–∏—Å—Ç –æ–∂–∏–¥–∞–Ω–∏—è (/waitlist)
- –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª waitlist —É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –≤ –∫–æ–¥–µ
- –¢–∞–±–ª–∏—Ü–∞ —Å–æ–∑–¥–∞–Ω–∞ –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
- –û—Å—Ç–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ UI
```

---

**–ö–æ–º–º–∏—Ç:** `9b61808 - Step 6: –£–ø—Ä–æ—â–µ–Ω–∏–µ —Å—Ö–µ–º—ã –ë–î - —É–±—Ä–∞–Ω–∞ –∏–∑–±—ã—Ç–æ—á–Ω–æ—Å—Ç—å –¥–ª—è –º–∞–ª–æ–≥–æ –±–∏–∑–Ω–µ—Å–∞`  
**GitHub:** https://github.com/moyamoyaradost/constellation-school-bot  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ü–û–õ–ù–û–°–¢–¨–Æ –ì–û–¢–û–í –¥–ª—è –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
