# –ö–†–ò–¢–ò–ß–ù–´–ï –ù–ï–î–û–°–¢–ê–Æ–©–ò–ï –§–£–ù–ö–¶–ò–ò - –ü–õ–ê–ù –†–ï–ê–õ–ò–ó–ê–¶–ò–ò

**–ê–≤—Ç–æ—Ä:** Maksim Novihin  
**–î–∞—Ç–∞:** 2025-01-20 19:17 UTC  
**–í–µ—Ä—Å–∏—è:** 1.0  
**–°—Ç–∞—Ç—É—Å:** –¢—Ä–µ–±—É–µ—Ç –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

## –û–ë–ù–ê–†–£–ñ–ï–ù–ù–´–ï –ü–†–û–ë–õ–ï–ú–´

### üö® –ö–†–ò–¢–ò–ß–ù–û: –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç —É–¥–∞–ª–µ–Ω–∏–µ —É—á–∏—Ç–µ–ª–µ–π
**–ü—Ä–æ–±–ª–µ–º–∞:** –í —Å–∏—Å—Ç–µ–º–µ –Ω–µ—Ç —Å–ø–æ—Å–æ–±–∞ —É–¥–∞–ª–∏—Ç—å —É—á–∏—Ç–µ–ª—è –∏ –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å —ç—Ç–∏–º –ø—Ä–æ—Ü–µ—Å—Å—ã
**–í–ª–∏—è–Ω–∏–µ:** –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ —É–ø—Ä–∞–≤–ª—è—Ç—å –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å—Å–∫–∏–º —Å–æ—Å—Ç–∞–≤–æ–º

### üö® –ö–†–ò–¢–ò–ß–ù–û: –ù–µ–ø–æ–ª–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π  
**–ü—Ä–æ–±–ª–µ–º–∞:** –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã —Ç–æ–ª—å–∫–æ –¥–ª—è –æ—Ç–º–µ–Ω—ã —É—Ä–æ–∫–æ–≤, –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç:
- –ü—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ —Å—Ç—É–¥–µ–Ω—Ç–∞–º
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø—Ä–∏ –ø–µ—Ä–µ–Ω–æ—Å–µ —É—Ä–æ–∫–æ–≤
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ —É—á–∏—Ç–µ–ª—è

## –ü–õ–ê–ù –ù–ï–ú–ï–î–õ–ï–ù–ù–û–ô –†–ï–ê–õ–ò–ó–ê–¶–ò–ò

### 1. –ö–æ–º–∞–Ω–¥–∞ `/delete_teacher`
**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `internal/handlers/handlers.go`
**–õ–æ–≥–∏–∫–∞:**
```go
func handleDeleteTeacher(bot *tgbotapi.BotAPI, message *tgbotapi.Message, db *sql.DB) {
    // 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
    // 2. –ü–∞—Ä—Å–∏–Ω–≥ teacher_id
    // 3. –ü–æ–∏—Å–∫ –≤—Å–µ—Ö —É—Ä–æ–∫–æ–≤ —É—á–∏—Ç–µ–ª—è (WHERE teacher_id = X AND soft_deleted = false)
    // 4. –ü–æ–∏—Å–∫ –≤—Å–µ—Ö —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ –∑–∞–ø–∏—Å–∞–Ω–Ω—ã—Ö –Ω–∞ —ç—Ç–∏ —É—Ä–æ–∫–∏
    // 5. –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
    // 6. –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏—è:
    //    - UPDATE lessons SET soft_deleted = true WHERE teacher_id = X
    //    - UPDATE enrollments SET soft_deleted = true WHERE lesson_id IN (...)
    //    - DELETE FROM waitlist WHERE lesson_id IN (...)  
    //    - UPDATE users SET is_active = false WHERE id IN (SELECT user_id FROM teachers WHERE id = X)
    // 7. –ú–∞—Å—Å–æ–≤–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π —Å—Ç—É–¥–µ–Ω—Ç–∞–º
}
```

### 2. –ö–æ–º–∞–Ω–¥–∞ `/notify_students`
**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `internal/handlers/handlers.go`
**–õ–æ–≥–∏–∫–∞:**
```go
func handleNotifyStudents(bot *tgbotapi.BotAPI, message *tgbotapi.Message, db *sql.DB) {
    // 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ (admin –∏–ª–∏ teacher —É—Ä–æ–∫–∞)
    // 2. –ü–∞—Ä—Å–∏–Ω–≥ lesson_id –∏ —Ç–µ–∫—Å—Ç–∞ —Å–æ–æ–±—â–µ–Ω–∏—è
    // 3. –ü–æ–∏—Å–∫ –≤—Å–µ—Ö —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ –∑–∞–ø–∏—Å–∞–Ω–Ω—ã—Ö –Ω–∞ —É—Ä–æ–∫
    // 4. –ú–∞—Å—Å–æ–≤–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è
}
```

### 3. –ö–æ–º–∞–Ω–¥–∞ `/cancel_with_notification`
**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `internal/handlers/handlers.go`
**–õ–æ–≥–∏–∫–∞:**
```go
func handleCancelWithNotification(bot *tgbotapi.BotAPI, message *tgbotapi.Message, db *sql.DB) {
    // 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤
    // 2. –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ–± —É—Ä–æ–∫–µ
    // 3. –ü–æ–∏—Å–∫ –∑–∞–ø–∏—Å–∞–Ω–Ω—ã—Ö —Å—Ç—É–¥–µ–Ω—Ç–æ–≤
    // 4. –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏—è:
    //    - UPDATE lessons SET status = 'cancelled' WHERE id = X
    //    - UPDATE enrollments SET soft_deleted = true WHERE lesson_id = X
    //    - DELETE FROM waitlist WHERE lesson_id = X
    // 5. –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤—Å–µ–º —Å—Ç—É–¥–µ–Ω—Ç–∞–º –æ–± –æ—Ç–º–µ–Ω–µ
}
```

### 4. –ö–æ–º–∞–Ω–¥–∞ `/reschedule_with_notify`
**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `internal/handlers/handlers.go`
**–õ–æ–≥–∏–∫–∞:**
```go
func handleRescheduleWithNotify(bot *tgbotapi.BotAPI, message *tgbotapi.Message, db *sql.DB) {
    // 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤
    // 2. –ü–∞—Ä—Å–∏–Ω–≥ lesson_id –∏ –Ω–æ–≤–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏
    // 3. –í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏
    // 4. –ü–æ–∏—Å–∫ –∑–∞–ø–∏—Å–∞–Ω–Ω—ã—Ö —Å—Ç—É–¥–µ–Ω—Ç–æ–≤
    // 5. UPDATE lessons SET start_time = X WHERE id = Y
    // 6. –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤—Å–µ–º —Å—Ç—É–¥–µ–Ω—Ç–∞–º –æ –ø–µ—Ä–µ–Ω–æ—Å–µ
}
```

## –®–ê–ë–õ–û–ù–´ –£–í–ï–î–û–ú–õ–ï–ù–ò–ô

### –£–¥–∞–ª–µ–Ω–∏–µ —É—á–∏—Ç–µ–ª—è:
```
‚ùå –£—Ä–æ–∫ –æ—Ç–º–µ–Ω—ë–Ω

–ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, —É—Ä–æ–∫ "[–ø—Ä–µ–¥–º–µ—Ç]" –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –Ω–∞ [–¥–∞—Ç–∞ –≤—Ä–µ–º—è] –æ—Ç–º–µ–Ω—ë–Ω –≤ —Å–≤—è–∑–∏ —Å –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏ –≤ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å—Å–∫–æ–º —Å–æ—Å—Ç–∞–≤–µ.

–ü—Ä–∏–Ω–æ—Å–∏–º –∏–∑–≤–∏–Ω–µ–Ω–∏—è –∑–∞ –Ω–µ—É–¥–æ–±—Å—Ç–≤–∞.
```

### –ü–µ—Ä–µ–Ω–æ—Å —É—Ä–æ–∫–∞:
```
üìÖ –£—Ä–æ–∫ –ø–µ—Ä–µ–Ω–µ—Å—ë–Ω

–£—Ä–æ–∫ "[–ø—Ä–µ–¥–º–µ—Ç]" –ø–µ—Ä–µ–Ω–µ—Å—ë–Ω —Å [—Å—Ç–∞—Ä–∞—è –¥–∞—Ç–∞ –≤—Ä–µ–º—è] –Ω–∞ [–Ω–æ–≤–∞—è –¥–∞—Ç–∞ –≤—Ä–µ–º—è].

–ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å: [–∏–º—è]
–ú–µ—Å—Ç–æ –≤ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–æ.
```

### –ü—Ä–æ–∏–∑–≤–æ–ª—å–Ω–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ:
```
üì¢ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø–æ —É—Ä–æ–∫—É "[–ø—Ä–µ–¥–º–µ—Ç]"
‚è∞ [–¥–∞—Ç–∞ –≤—Ä–µ–º—è]

[—Ç–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –æ—Ç –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞]
```

## –û–ë–ù–û–í–õ–ï–ù–ò–ï –ö–û–ú–ê–ù–î

### –í main.go –¥–æ–±–∞–≤–∏—Ç—å:
```go
"delete_teacher":           handleDeleteTeacher,
"notify_students":         handleNotifyStudents,  
"cancel_with_notification": handleCancelWithNotification,
"reschedule_with_notify":  handleRescheduleWithNotify,
```

### –í /help –¥–æ–±–∞–≤–∏—Ç—å —Å–µ–∫—Ü–∏—é –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞:
```
üîß –ö–û–ú–ê–ù–î–´ –ê–î–ú–ò–ù–ò–°–¢–†–ê–¢–û–†–ê:
/delete_teacher [id] - —É–¥–∞–ª–∏—Ç—å —É—á–∏—Ç–µ–ª—è
/notify_students [lesson_id] [—Ç–µ–∫—Å—Ç] - —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —Å—Ç—É–¥–µ–Ω—Ç–∞–º
/cancel_with_notification [lesson_id] - –æ—Ç–º–µ–Ω–∏—Ç—å —Å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º–∏  
/reschedule_with_notify [lesson_id] [–Ω–æ–≤–æ–µ_–≤—Ä–µ–º—è] - –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ —Å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º–∏
```

## –ü–†–ò–û–†–ò–¢–ï–¢ –†–ï–ê–õ–ò–ó–ê–¶–ò–ò
1. **–ü–ï–†–í–´–ô –ü–†–ò–û–†–ò–¢–ï–¢:** `/delete_teacher` - –∫—Ä–∏—Ç–∏—á–Ω–æ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç
2. **–í–¢–û–†–û–ô –ü–†–ò–û–†–ò–¢–ï–¢:** `/cancel_with_notification` –∏ `/reschedule_with_notify` 
3. **–¢–†–ï–¢–ò–ô –ü–†–ò–û–†–ò–¢–ï–¢:** `/notify_students` –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π

## –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï
–ü–æ—Å–ª–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –∫–∞–∂–¥–æ–π –∫–æ–º–∞–Ω–¥—ã:
1. –¢–µ—Å—Ç —Å –≤–∞–ª–∏–¥–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
2. –¢–µ—Å—Ç —Å –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏  
3. –¢–µ—Å—Ç –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞
4. –¢–µ—Å—Ç –æ—Ç–ø—Ä–∞–≤–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
5. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ë–î –ø–æ—Å–ª–µ –æ–ø–µ—Ä–∞—Ü–∏–π

**–í–†–ï–ú–Ø –ù–ê –†–ï–ê–õ–ò–ó–ê–¶–ò–Æ:** 2-3 —á–∞—Å–∞ –¥–ª—è –≤—Å–µ—Ö –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π.
